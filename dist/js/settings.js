/*! (c) Philipp KÃ¶nig under GPL-3.0 */
(e=>{"use strict";let o={saved:"saved",restored:"restored"},t={body:e("body"),title:e("head > title"),rangeInputs:e("input[type='range']"),pxToleranceMaximized:e("input#pxToleranceMaximized"),pxToleranceWindowed:e("input#pxToleranceWindowed"),showIndicator:e("input#showIndicator"),openAction:e("select#openAction"),closeTab:e("input#closeTab"),save:e("button#save"),restoreDefaults:e("button#restore"),copyright:e("span#copyright")};t.rangeInputs.on("input change",o=>{e(o.currentTarget).next("span").text(o.currentTarget.value)}),t.save.on("click",e=>{chrome.storage.sync.set({showIndicator:t.showIndicator[0].checked,closeTab:t.closeTab[0].checked,openAction:t.openAction[0].value,pxTolerance:{windowed:t.pxToleranceWindowed[0].value,maximized:t.pxToleranceMaximized[0].value}},()=>{t.body.addClass(o.saved),setTimeout(()=>{t.body.removeClass(o.saved)},1500)})}),t.restoreDefaults.on("click",()=>{chrome.storage.sync.remove(["showIndicator","closeTab","pxTolerance","openAction"],()=>{t.body.addClass(o.restored),setTimeout(()=>{t.body.removeClass(o.restored),setTimeout(()=>{window.close()},100)},1500)})}),(()=>{e("[data-i18n]").forEach(o=>{let t=e(o).attr("data-i18n");e(o).text(chrome.i18n.getMessage("settings_"+t))});let o=chrome.runtime.getManifest();t.title.text(o.short_name+" - "+t.title.text())})(),(()=>{let e=+t.copyright.children("span.created").text(),o=(new Date).getFullYear();o>e&&t.copyright.children("span.created").text(e+" - "+o),chrome.storage.sync.get("showIndicator",e=>{t.showIndicator[0].checked=void 0===e.showIndicator||!0===e.showIndicator}),chrome.storage.sync.get("closeTab",e=>{t.closeTab[0].checked=void 0!==e.closeTab&&!0===e.closeTab}),chrome.storage.sync.get("openAction",e=>{t.openAction[0].value=void 0===e.openAction?"mousedown":e.openAction}),chrome.storage.sync.get("pxTolerance",e=>{let o={windowed:20,maximized:1};void 0!==e.pxTolerance&&(o=e.pxTolerance),t.pxToleranceMaximized[0].value=o.maximized,t.pxToleranceWindowed[0].value=o.windowed,t.pxToleranceMaximized.trigger("change"),t.pxToleranceWindowed.trigger("change")})})()})(jsu);