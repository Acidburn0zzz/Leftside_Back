/*! (c) Philipp KÃ¶nig under GPL-3.0 */
"use strict";!function(){window.ext=function(a){this.run=function(){c(),e()};var b=!1,c=function(){chrome.storage.sync.get(["pxTolerance","addVisual","closeTab"],function(c){"undefined"!=typeof c.pxTolerance&&("string"==typeof c.pxTolerance&&0===c.pxTolerance.search(/^\d+$/)&&(c.pxTolerance='{"windowed":20,"maximized":'+c.pxTolerance+"}"),a.config.pxTolerance=JSON.parse(c.pxTolerance)),a.config.addVisual="n"!==c.addVisual,a.config.closeTab="undefined"!=typeof c.closeTab&&"n"!==c.closeTab,b&&document.dispatchEvent(new CustomEvent("DOMContentLoaded"))})},d=function(){var b=0!==window.screenX||0!==window.screenY||window.screen.availWidth!==window.innerWidth;return a.config.pxTolerance[b?"windowed":"maximized"]},e=function(){document.addEventListener("mousedown",function(b){b.pageX<d()&&0===b.button&&!function(){var b=!0;window.onbeforeunload=window.onpopstate=function(){b=!1},window.history.back(),setTimeout(function(){a.config.closeTab&&b&&chrome.extension.sendMessage({type:"closeTab"})},200)}()},{passive:!0}),document.addEventListener("DOMContentLoaded",function(){b=!0;var c=document.createElement("div");c.id=a.ids.main,document.body.appendChild(c),c.style.width=d()+"px",a.config.addVisual&&(c.classList.add(a.classes.visual),document.addEventListener("mousemove",function(b){b.pageX<d()?c.classList.add(a.classes.hover):c.classList.remove(a.classes.hover)},{passive:!0}),document.addEventListener("visibilitychange",function(){document.hidden&&c.classList.remove(a.classes.hover)}),window.addEventListener("resize",function(){c.style.width=d()+"px"},{passive:!0})),f()})},f=function(){document.dispatchEvent(new CustomEvent(a.events.loaded,{detail:{pxTolerance:d(),addVisual:a.config.addVisual},bubbles:!0,cancelable:!1}))}}}(),function(){var a={ids:{main:"blockbyte-lsb-main"},classes:{visual:"blockbyte-lsb-add-visual",hover:"blockbyte-lsb-hover"},events:{loaded:"blockbyte-lsb-loaded"},config:{pxTolerance:{windowed:20,maximized:1},addVisual:!1,closeTab:!1}};new window.ext(a).run()}();